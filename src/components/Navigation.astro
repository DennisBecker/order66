---
import Logo from './Logo.astro';

const currentPath = Astro.url.pathname;
const baseUrl = import.meta.env.BASE_URL;

// Ensure proper URL construction
const buildUrl = (path: string) => {
  if (baseUrl === '/') return path;
  return `${baseUrl.endsWith('/') ? baseUrl.slice(0, -1) : baseUrl}${path}`;
};

const navItems = [
  { href: buildUrl('/'), label: 'Dashboard', icon: '📊' },
  { href: buildUrl('/help/'), label: 'Help', icon: '❓' },
  { href: buildUrl('/about/'), label: 'About', icon: 'ℹ️' },
];
---

<nav class="glass-card p-4 mb-8">
  <div class="flex justify-between items-center">
    <Logo size="md" />
    
    <div class="flex gap-6">
      {navItems.map(item => (
        <a 
          href={item.href}
          class:list={[
            "flex items-center gap-2 px-4 py-2 rounded-lg transition-colors",
            currentPath === item.href 
              ? "bg-cyan-500/20 text-cyan-400 border border-cyan-500/30" 
              : "text-gray-300 hover:text-cyan-400 hover:bg-cyan-500/10"
          ]}
        >
          <span>{item.icon}</span>
          <span class="font-medium">{item.label}</span>
        </a>
      ))}
    </div>
    
    <div class="flex items-center gap-4">
      <button 
        id="refreshData" 
        class="btn-primary text-sm"
        title="Refresh Data"
      >
        🔄 Refresh
      </button>
    </div>
  </div>
</nav>
